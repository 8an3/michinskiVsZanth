import{r as c,j as A,R as x,a as y}from"./jsx-runtime-BMrMXMSG.js";import{u as h,S as g}from"./index-jJ7PKnZH.js";import{r as _}from"./index-BlA7Mg33.js";function J(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function w(e,t=[]){let n=[];function o(i,f){const u=c.createContext(f),a=n.length;n=[...n,f];function s(l){const{scope:N,children:m,...d}=l,S=(N==null?void 0:N[e][a])||u,C=c.useMemo(()=>d,Object.values(d));return A.jsx(S.Provider,{value:C,children:m})}function p(l,N){const m=(N==null?void 0:N[e][a])||u,d=c.useContext(m);if(d)return d;if(f!==void 0)return f;throw new Error(`\`${l}\` must be used within \`${i}\``)}return s.displayName=i+"Provider",[s,p]}const r=()=>{const i=n.map(f=>c.createContext(f));return function(u){const a=(u==null?void 0:u[e])||i;return c.useMemo(()=>({[`__scope${e}`]:{...u,[e]:a}}),[u,a])}};return r.scopeName=e,[o,b(r,...t)]}function b(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const o=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const f=o.reduce((u,{useScope:a,scopeName:s})=>{const l=a(i)[`__scope${s}`];return{...u,...l}},{});return c.useMemo(()=>({[`__scope${t.scopeName}`]:f}),[f])}};return n.scopeName=t.scopeName,n}function K(e){const t=e+"CollectionProvider",[n,o]=w(t),[r,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),f=m=>{const{scope:d,children:S}=m,C=x.useRef(null),R=x.useRef(new Map).current;return A.jsx(r,{scope:d,itemMap:R,collectionRef:C,children:S})};f.displayName=t;const u=e+"CollectionSlot",a=x.forwardRef((m,d)=>{const{scope:S,children:C}=m,R=i(u,S),v=h(d,R.collectionRef);return A.jsx(g,{ref:v,children:C})});a.displayName=u;const s=e+"CollectionItemSlot",p="data-radix-collection-item",l=x.forwardRef((m,d)=>{const{scope:S,children:C,...R}=m,v=x.useRef(null),E=h(d,v),M=i(s,S);return x.useEffect(()=>(M.itemMap.set(v,{ref:v,...R}),()=>void M.itemMap.delete(v))),A.jsx(g,{[p]:"",ref:E,children:C})});l.displayName=s;function N(m){const d=i(e+"CollectionConsumer",m);return x.useCallback(()=>{const C=d.collectionRef.current;if(!C)return[];const R=Array.from(C.querySelectorAll(`[${p}]`));return Array.from(d.itemMap.values()).sort((M,T)=>R.indexOf(M.ref.current)-R.indexOf(T.ref.current))},[d.collectionRef,d.itemMap])}return[{Provider:f,Slot:a,ItemSlot:l},N,o]}var O=globalThis!=null&&globalThis.document?c.useLayoutEffect:()=>{},D=y.useId||(()=>{}),U=0;function Q(e){const[t,n]=c.useState(D());return O(()=>{e||n(o=>o??String(U++))},[e]),e||(t?`radix-${t}`:"")}var L=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],V=L.reduce((e,t)=>{const n=c.forwardRef((o,r)=>{const{asChild:i,...f}=o,u=i?g:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),A.jsx(u,{...f,ref:r})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function I(e){const t=c.useRef(e);return c.useEffect(()=>{t.current=e}),c.useMemo(()=>(...n)=>{var o;return(o=t.current)==null?void 0:o.call(t,...n)},[])}function X({prop:e,defaultProp:t,onChange:n=()=>{}}){const[o,r]=j({defaultProp:t,onChange:n}),i=e!==void 0,f=i?e:o,u=I(n),a=c.useCallback(s=>{if(i){const l=typeof s=="function"?s(e):s;l!==e&&u(l)}else r(s)},[i,e,r,u]);return[f,a]}function j({defaultProp:e,onChange:t}){const n=c.useState(e),[o]=n,r=c.useRef(o),i=I(t);return c.useEffect(()=>{r.current!==o&&(i(o),r.current=o)},[o,r,i]),n}var $=c.createContext(void 0);function Y(e){const t=c.useContext($);return e||t||"ltr"}function W(e,t){return c.useReducer((n,o)=>t[n][o]??n,e)}var k=e=>{const{present:t,children:n}=e,o=B(t),r=typeof n=="function"?n({present:o.isPresent}):c.Children.only(n),i=h(o.ref,q(r));return typeof n=="function"||o.isPresent?c.cloneElement(r,{ref:i}):null};k.displayName="Presence";function B(e){const[t,n]=c.useState(),o=c.useRef({}),r=c.useRef(e),i=c.useRef("none"),f=e?"mounted":"unmounted",[u,a]=W(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const s=P(o.current);i.current=u==="mounted"?s:"none"},[u]),O(()=>{const s=o.current,p=r.current;if(p!==e){const N=i.current,m=P(s);e?a("MOUNT"):m==="none"||(s==null?void 0:s.display)==="none"?a("UNMOUNT"):a(p&&N!==m?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,a]),O(()=>{if(t){const s=l=>{const m=P(o.current).includes(l.animationName);l.target===t&&m&&_.flushSync(()=>a("ANIMATION_END"))},p=l=>{l.target===t&&(i.current=P(o.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",s),t.addEventListener("animationend",s),()=>{t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",s),t.removeEventListener("animationend",s)}}else a("ANIMATION_END")},[t,a]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:c.useCallback(s=>{s&&(o.current=getComputedStyle(s)),n(s)},[])}}function P(e){return(e==null?void 0:e.animationName)||"none"}function q(e){var o,r;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}export{V as P,Q as a,J as b,w as c,k as d,O as e,K as f,Y as g,I as h,X as u};
